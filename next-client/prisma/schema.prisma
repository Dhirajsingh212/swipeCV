generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id               String  @id @default(cuid())
  email            String  @unique
  clerkUserId      String  @unique
  
  firstName   String?
  lastName    String?
  imageUrl    String?
  bio         String?

  forms       Form[]   @relation("UserForms")

  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

model Form {
  id         String   @id @default(cuid())
  formTitle  String   @unique
  fields     Field[]  @relation("FormFields")
  user       User     @relation("UserForms", fields: [userId], references: [id])
  userId     String   // Reference to User
  
  createdAt  DateTime @default(now())
}

model Field {
  id        String      @id @default(cuid())
  form      Form        @relation("FormFields", fields: [formId], references: [id])
  formId    String
  type      FieldType
  label     String
  options   Option[]   // For multipleChoice or checkbox
  createdAt DateTime    @default(now())
}

model Option {  // For storing options in multipleChoice or checkbox fields
  id        String   @id @default(cuid())
  field     Field    @relation(fields: [fieldId], references: [id])
  fieldId   String
  value     String
}

enum FieldType {
  text
  multipleChoice
  checkbox
  date
  file
}
